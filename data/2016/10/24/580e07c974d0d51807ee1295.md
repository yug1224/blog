---
id: 580e07c974d0d51807ee1295
title: JavaScriptでの英数字の半角全角変換は0xFEE0シフトするだけ
create: '2016-10-24 22:08'
modify: '2016-10-24 22:08'
categories:
  - JavaScript
  - Tips
---

JavaScript で全角英数字と半角英数字の変換をする時、どうしていますか？

マッピングファイルを自作して愚直に変換していませんか？

英数字と一部の記号の並び方は全角半角でほぼ同じなので、文字コードを `0xFEE0` 分シフトするだけで相互に変換することが可能です。

<!-- more -->

## 半角英数字

半角英数字は `U+0021` ~ `U+007F` になります。

|        |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  A  |  B  |   C    |  D  |  E  |  F  |
| :----: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :----: | :-: | :-: | :-: |
| U+0020 |     |  !  |  "  |  #  |  $  |  %  |  &  |  '  |  (  |  )  | \*  |  +  |   ,    |  -  |  .  |  /  |
| U+0030 |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  :  |  ;  |   <    |  =  |  >  |  ?  |
| U+0040 |  @  |  A  |  B  |  C  |  D  |  E  |  F  |  G  |  H  |  I  |  J  |  K  |   L    |  M  |  N  |  O  |
| U+0050 |  P  |  Q  |  R  |  S  |  T  |  U  |  V  |  W  |  X  |  Y  |  Z  |  [  |   \    |  ]  |  ^  | \_  |
| U+0060 |  `  |  a  |  b  |  c  |  d  |  e  |  f  |  g  |  h  |  i  |  j  |  k  |   l    |  m  |  n  |  o  |
| U+0070 |  p  |  q  |  r  |  s  |  t  |  u  |  v  |  w  |  x  |  y  |  z  |  {  | &#124; |  }  |  ~  | DEL |

<!--
|   | U+0020 | U+0030 | U+0040 | U+0050 | U+0060 | U+0070 |
|:-:|:------:|:------:|:------:|:------:|:------:|:------:|
| 0 |        |    0   |    @   |    P   |    `   |    p   |
| 1 |    !   |    1   |    A   |    Q   |    a   |    q   |
| 2 |    "   |    2   |    B   |    R   |    b   |    r   |
| 3 |    #   |    3   |    C   |    S   |    c   |    s   |
| 4 |    $   |    4   |    D   |    T   |    d   |    t   |
| 5 |    %   |    5   |    E   |    U   |    e   |    u   |
| 6 |    &   |    6   |    F   |    V   |    f   |    v   |
| 7 |    '   |    7   |    G   |    W   |    g   |    w   |
| 8 |    (   |    8   |    H   |    X   |    h   |    x   |
| 9 |    )   |    9   |    I   |    Y   |    i   |    y   |
| A |    *   |    :   |    J   |    Z   |    j   |    z   |
| B |    +   |    ;   |    K   |    [   |    k   |    {   |
| C |    ,   |    <   |    L   |    \   |    l   | &#124; |
| D |    -   |    =   |    M   |    ]   |    m   |    }   |
| E |    .   |    >   |    N   |    ^   |    n   |    ~   |
| F |    /   |    ?   |    O   |    _   |    o   |   DEL  |
 -->

## 全角英数字

全角英数字は `U+FF01` ~ `U+FF5E` になります。

|        |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  A  |  B  |  C  |  D  |  E  |  F  |
| :----: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| U+FF00 |     | ！  | ＂  | ＃  | ＄  | ％  | ＆  | ＇  | （  | ）  | ＊  | ＋  | ，  | －  | ．  | ／  |
| U+FF10 | ０  | １  | ２  | ３  | ４  | ５  | ６  | ７  | ８  | ９  | ：  | ；  | ＜  | ＝  | ＞  | ？  |
| U+FF20 | ＠  | Ａ  | Ｂ  | Ｃ  | Ｄ  | Ｅ  | Ｆ  | Ｇ  | Ｈ  |  I  |  J  | Ｋ  | Ｌ  | Ｍ  | Ｎ  | Ｏ  |
| U+FF30 | Ｐ  | Ｑ  | Ｒ  | Ｓ  | Ｔ  | Ｕ  | Ｖ  | Ｗ  | Ｘ  | Ｙ  | Ｚ  | ［  | ＼  | ］  | ＾  | ＿  |
| U+FF40 | ｀  | ａ  | ｂ  | ｃ  | ｄ  | ｅ  | ｆ  | ｇ  | ｈ  | ｉ  | ｊ  | ｋ  | ｌ  | ｍ  | ｎ  | ｏ  |
| U+FF50 | ｐ  | ｑ  | ｒ  | ｓ  | ｔ  | ｕ  | ｖ  | ｗ  | ｘ  | ｙ  | ｚ  | ｛  | ｜  | ｝  | ～  | ｟  |

<!--
|   | U+FF00 | U+FF10 | U+FF20 | U+FF30 | U+FF40 | U+FF50 |
|:-:|:------:|:------:|:------:|:------:|:------:|:------:|
| 0 |        |   ０   |   ＠   |   Ｐ   |   ｀   |   ｐ   |
| 1 |   ！   |   １   |   Ａ   |   Ｑ   |   ａ   |   ｑ   |
| 2 |   ＂   |   ２   |   Ｂ   |   Ｒ   |   ｂ   |   ｒ   |
| 3 |   ＃   |   ３   |   Ｃ   |   Ｓ   |   ｃ   |   ｓ   |
| 4 |   ＄   |   ４   |   Ｄ   |   Ｔ   |   ｄ   |   ｔ   |
| 5 |   ％   |   ５   |   Ｅ   |   Ｕ   |   ｅ   |   ｕ   |
| 6 |   ＆   |   ６   |   Ｆ   |   Ｖ   |   ｆ   |   ｖ   |
| 7 |   ＇   |   ７   |   Ｇ   |   Ｗ   |   ｇ   |   ｗ   |
| 8 |   （   |   ８   |   Ｈ   |   Ｘ   |   ｈ   |   ｘ   |
| 9 |   ）   |   ９   |    I   |   Ｙ   |   ｉ   |   ｙ   |
| A |   ＊   |   ：   |    J   |   Ｚ   |   ｊ   |   ｚ   |
| B |   ＋   |   ；   |   Ｋ   |   ［   |   ｋ   |   ｛   |
| C |   ，   |   ＜   |   Ｌ   |   ＼   |   ｌ   |   ｜   |
| D |   －   |   ＝   |   Ｍ   |   ］   |   ｍ   |   ｝   |
| E |   ．   |   ＞   |   Ｎ   |   ＾   |   ｎ   |   ～   |
| F |   ／   |   ？   |   Ｏ   |   ＿   |   ｏ   |   ｟   |
 -->

## 変換処理

入力された文字の文字コードを `charCodeAt` で取得します。

取得した値から `0xFEE0` を、全角 → 半角の場合は引き、半角 → 全角の場合は足すだけです。

```js
// 全角英数字を半角英数字にする場合
function toHalfWidth(value) {
  return value.replace(/./g, (s) => {
    return String.fromCharCode(s.charCodeAt(0) - 0xfee0)
  })
}

toHalfWidth('ＡＢＣ１２３') // 'ABC123'
```

```js
// 半角数字を全角数字にする場合
function toFullWidth(value) {
  return value.replace(/./g, (s) => {
    return String.fromCharCode(s.charCodeAt(0) + 0xfee0)
  })
}

toFullWidth('ABC123') // 'ＡＢＣ１２３'
```

以上
